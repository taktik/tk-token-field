<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-dropdown/iron-dropdown.html">
<link rel="import" href="../neon-animation/web-animations.html">
<link rel="import" href="../neon-animation/neon-animations.html">
<link rel="import" href="../paper-styles/shadow.html">
<link rel="import" href="../polymer/lib/utils/flattened-nodes-observer.html">
<link rel="import" href="tk-expand-animation.html">

<dom-module id="tk-token-field-dropdown">
    <template>
        <style>
            iron-dropdown {
                background: var(--tk-token-field-dropdown-background-color, #fafafa);
                color: var(--tk-token-field-dropdown-text-color, --secondary-text-color);
                @apply(--shadow-elevation-2dp);
                min-width: 280px;
            }
        </style>

        <iron-dropdown id="dropdown"
                       vertical-align="[[verticalAlign]]"
                       horizontal-align="[[horizontalAlign]]"
                       auto-fit-on-attach="[[autoFitOnAttach]]"
                       no-overlap="[[noOverlap]]"
                       open-animation-config="[[openAnimationConfig]]"
                       close-animation-config="[[closeAnimationConfig]]">
            <div slot="dropdown-content">
                <slot id="contentNode" name="token-dropdown-content"></slot>
            </div>
        </iron-dropdown>
    </template>
    <script>
			class TkTokenFieldDropdown extends Polymer.Element {
				static get is() {
					return 'tk-token-field-dropdown'
				}

				static get properties() {
					return {
						verticalAlign: String,
						horizontalAlign: String,
						autoFitOnAttach: {
							type: Boolean,
							value: false
						},
						noOverlap: {
							type: Boolean,
							value: false
						},
						disabled: Boolean,
						dropdown: {
							type: Object
						},
						openAnimationConfig: {
							type: Array,
							value: function () {
								return [{
									name: 'fade-in-animation',
									timing: {
										delay: 150,
										duration: 50
									}
								}, {
									name: 'tk-expand-animation',
									timing: {
										delay: 150,
										duration: 200
									}
								}]
							}
						},
						closeAnimationConfig: {
							type: Array,
							value: function () {
								return [{
									name: 'fade-out-animation',
									timing: {
										duration: 300
									}
								}]
							}
						}
					}
				}

				ready() {
					super.ready()

					this.dropdown = this.$.dropdown
				}


				/**
				 * Open can be used to open the dropdown list
				 */
				open() {
					this.$.dropdown.open()
				}

				/**
				 * Close can be used to close the dropdown list
				 */
				close() {
					this.$.dropdown.close()
				}
			}

			window.customElements.define(TkTokenFieldDropdown.is, TkTokenFieldDropdown)

    </script>
</dom-module>
